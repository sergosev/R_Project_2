knitr::opts_chunk$set(echo = TRUE,
error = FALSE,
warning = FALSE,
message = FALSE)
#Задаем рабочую директорию
main_dir <- dirname(rstudioapi::getSourceEditorContext()$path)
setwd(main_dir)
#Подгружаем библиотеки
library(tidyr)
library(dplyr)
library(ggplot2)
library(flextable)
install.packages("flextable")
knitr::opts_chunk$set(echo = TRUE,
error = FALSE,
warning = FALSE,
message = FALSE)
#Задаем рабочую директорию
main_dir <- dirname(rstudioapi::getSourceEditorContext()$path)
setwd(main_dir)
#Подгружаем библиотеки
library(tidyr)
library(dplyr)
library(ggplot2)
library(flextable)
library(psych)
library(tibble)
library(car)
library(readr)
data <- read_csv("dataset_1_diabetes.csv")
View(data)
knitr::opts_chunk$set(echo = TRUE,
error = FALSE,
warning = FALSE,
message = FALSE)
#Задаем рабочую директорию
main_dir <- dirname(rstudioapi::getSourceEditorContext()$path)
setwd(main_dir)
#Подгружаем библиотеки
library(tidyr)
library(dplyr)
library(ggplot2)
library(flextable)
library(psych)
library(tibble)
library(car)
library(readr)
data <- read_csv("dataset_1_diabetes.csv")
str(data)
is.na(data)
table(is.na(data))
str(data)[0]
str(data)$age
describe(data)
is.character(data)
as.data.frame(sapply(data, class))
sapply(your_dataframe[sapply(your_dataframe, is.character)], unique)
sapply(data[sapply(data, is.character)], unique)
as.tibble(sapply(data, class))
as.data.frame(sapply(data, class)) %>%
flextable()
as.data.frame(sapply(data, class))
as.data.frame(sapply(data, class)) %>%
rownames_to_column() %>%
flextable()
as.data.frame(sapply(data, class)) %>%
rownames_to_column() %>%
rename(rowname = "Переменная", "sapply(data, class)" = "Тип данных")
as.data.frame(sapply(data, class)) %>%
rownames_to_column() %>%
rename("Переменная" = rowname, "Тип данных" = "sapply(data, class)")
flextable()
as.data.frame(sapply(data, class)) %>%
rownames_to_column() %>%
rename("Переменная" = rowname, "Тип данных" = "sapply(data, class)") %>%
flextable()
sapply(data[sapply(data, is.character)], unique)
lapply(your_dataframe[sapply(your_dataframe, is.character)], function(x) {
cat("Unique values:", length(unique(x)), "\n")
print(sort(unique(x)))
cat("\n")
})
sapply(data[sapply(data, is.character)], unique)
lapply(data[sapply(data, is.character)], function(x) {
cat("Unique values:", length(unique(x)), "\n")
print(sort(unique(x)))
cat("\n")
})
sapply(data[sapply(data, is.character)], unique)
sapply(data[с(sapply(data, is.character), 1)], unique)
sapply(data[c(sapply(data, is.character), 1)], unique)
View(data)
sapply(data[c(sapply(data, is.character), 13:15)], unique)
data[c(sapply(data, is.character), 13:15)]
data
data[c(sapply(data, is.character), 13:15)]
sapply(data, is.character)
sapply(data[c(2:7, 13:15, 30:31)], unique)
typed_data <- data %>%
mutate(gender = as.factor(gender),
ethnicity = as.factor(ethnicity),
education_level = as.factor(education_level),
income_level = as. factor(income_level),
typed_data <- data %>%
mutate(gender = as.factor(gender),
ethnicity = as.factor(ethnicity),
education_level = as.factor(education_level),
income_level = as.factor(income_level),
employment_status = as.factor(employment_status),
smoking_status = as.factor(smoking_status),
family_history_diabetes = as.factor(recode(family_history_diabetes, 1 = "yes", 0 = "no")),
typed_data <- data %>%
mutate(gender = as.factor(gender),
ethnicity = as.factor(ethnicity),
education_level = as.factor(education_level),
income_level = as.factor(income_level),
employment_status = as.factor(employment_status),
smoking_status = as.factor(smoking_status),
family_history_diabetes = as.factor(recode(family_history_diabetes, '1' = "yes", '0' = "no")),
hypertension_history = as.factor(recode(hypertension_history, '1' = "yes", '0' = "no")),
cardiovascular_history = as.factor(recode(cardiovascular_history, '1' = "yes", '0' = "no")),
diabetes_stage = as.factor(diabetes_stage),
diagnosed_diabetes = as.factor(recode(diagnosed_diabetes, '1' = "yes", '0' = "no")))
typed_data <- data %>%
mutate(across(gender, ethnicity, education_level, income_level, employment_status, smoking_status, diabetes_stage),
as.factor) %>%
mutate(across(family_history_diabetes, hypertension_history, cardiovascular_history, diagnosed_diabetes),
~ as.factor(recode(., '1' = "yes", '0' = "no")))
typed_data <- data %>%
mutate(across(gender, ethnicity, education_level, income_level, employment_status, smoking_status, diabetes_stage),
as.factor) %>%
mutate(across(family_history_diabetes, hypertension_history, cardiovascular_history, diagnosed_diabetes),
~ as.factor(recode(., '1' = "yes", '0' = "no")))
typed_data <- data %>%
mutate(across(gender, ethnicity, education_level, income_level, employment_status, smoking_status, diabetes_stage),
as.factor) %>%
mutate(across(family_history_diabetes, hypertension_history, cardiovascular_history, diagnosed_diabetes),
~ as.factor(recode(., '1' = "yes", '0' = "no")))
typed_data <- data %>%
mutate(across(c(gender, ethnicity, education_level, income_level, employment_status, smoking_status, diabetes_stage)),
as.factor) %>%
mutate(across(c(family_history_diabetes, hypertension_history, cardiovascular_history, diagnosed_diabetes)),
~ as.factor(recode(., '1' = "yes", '0' = "no")))
typed_data <- data %>%
mutate(across(c(gender, ethnicity, education_level, income_level, employment_status, smoking_status, diabetes_stage),
as.factor) %>%
mutate(across(c(family_history_diabetes, hypertension_history, cardiovascular_history, diagnosed_diabetes),
~ as.factor(recode(., '1' = "yes", '0' = "no")))
typed_data <- data %>%
mutate(across(c(gender, ethnicity, education_level, income_level, employment_status, smoking_status, diabetes_stage),
as.factor,
across(c(family_history_diabetes, hypertension_history, cardiovascular_history, diagnosed_diabetes),
~ as.factor(recode(., '1' = "yes", '0' = "no")))
typed_data <- data %>%
mutate(across(c(gender, ethnicity, education_level, income_level, employment_status, smoking_status, diabetes_stage),
as.factor),
across(c(family_history_diabetes, hypertension_history, cardiovascular_history, diagnosed_diabetes),
~ as.factor(recode(., '1' = "yes", '0' = "no"))))
typed_data <- data %>%
mutate(across(c(gender, ethnicity, education_level, income_level, employment_status, smoking_status, diabetes_stage),
as.factor),
across(c(family_history_diabetes, hypertension_history, cardiovascular_history, diagnosed_diabetes),
~ as.factor(recode(., 1 = "yes", 0 = "no"))))
typed_data <- data %>%
mutate(across(c(gender, ethnicity, education_level, income_level, employment_status, smoking_status, diabetes_stage),
as.factor),
across(c(family_history_diabetes, hypertension_history, cardiovascular_history, diagnosed_diabetes),
~ as.factor(ifelse(. == 1, "yes", "no"))))
str(data)
str(typed_data)
View(typed_data)
typed_data %>%
select(where(is.numeric)) %>%
pivot_longer(cols = everything(), names_to = variables, values_to = values)
typed_data %>%
select(where(is.numeric)) %>%
pivot_longer(cols = everything(), names_to = 'variables', values_to = 'values')
typed_data %>%
select(where(is.numeric)) %>%
pivot_longer(cols = everything(), names_to = 'variables', values_to = 'values') %>%
mutate(variables = as.factor(variables)) %>%
ggplot(aes(x = variables)) %>%
geom_violin()
typed_data %>%
select(where(is.numeric)) %>%
pivot_longer(cols = everything(), names_to = 'variables', values_to = 'values') %>%
mutate(variables = as.factor(variables)) %>%
ggplot(aes(x = variables)) +
geom_violin()
typed_data %>%
select(where(is.numeric)) %>%
pivot_longer(cols = everything(), names_to = 'variables', values_to = 'values') %>%
mutate(variables = as.factor(variables)) %>%
ggplot(aes(x = variables, y = values)) +
geom_violin()
typed_data %>%
select(where(is.numeric)) %>%
pivot_longer(cols = everything(), names_to = 'variables', values_to = 'values') %>%
mutate(variables = as.factor(variables)) %>%
ggplot(aes(x = variables, y = values)) +
geom_boxplot()
typed_data %>%
select(where(is.numeric)) %>%
pivot_longer(cols = everything(), names_to = 'variables', values_to = 'values') %>%
mutate(variables = as.factor(variables)) %>%
ggplot(aes(x = variables, y = values)) +
geom_boxplot() +
facet_wrap(~ variables, scales = "free")
typed_data %>%
select(where(is.numeric)) %>%
pivot_longer(cols = everything(), names_to = 'variables', values_to = 'values') %>%
mutate(variables = as.factor(variables)) %>%
ggplot(aes(x = variables, y = values)) +
geom_boxplot() +
facet_wrap(~ variables, scales = "free", ncol = 3)
typed_data %>%
select(where(is.numeric)) %>%
pivot_longer(cols = everything(), names_to = 'variables', values_to = 'values') %>%
mutate(variables = as.factor(variables)) %>%
group_by(variables) %>%
mutates(scaled_values = scale(values)) %>%
ungroup() %>%
ggplot(aes(x = variables, y = values)) +
geom_boxplot()
typed_data %>%
select(where(is.numeric)) %>%
pivot_longer(cols = everything(), names_to = 'variables', values_to = 'values') %>%
mutate(variables = as.factor(variables)) %>%
group_by(variables) %>%
mutate(scaled_values = scale(values)) %>%
ungroup() %>%
ggplot(aes(x = variables, y = values)) +
geom_boxplot()
typed_data %>%
select(where(is.numeric)) %>%
pivot_longer(cols = everything(), names_to = 'variables', values_to = 'values') %>%
mutate(variables = as.factor(variables)) %>%
group_by(variables) %>%
mutate(scaled_values = scale(values)) %>%
ungroup() %>%
ggplot(aes(x = variables, y = values)) +
geom_boxplot() +
theme(axis.text.x = element_text(angle = 45, hjust = 1))
typed_data %>%
select(where(is.numeric)) %>%
pivot_longer(cols = everything(), names_to = 'variables', values_to = 'values') %>%
mutate(variables = as.factor(variables)) %>%
group_by(variables) %>%
mutate(scaled_values = scale(values)) %>%
ungroup() %>%
ggplot(aes(x = variables, y = scaled_values)) +
geom_boxplot() +
theme(axis.text.x = element_text(angle = 45, hjust = 1))
typed_data %>%
select(where(is.numeric)) %>%
pivot_longer(cols = everything(), names_to = 'variables', values_to = 'values') %>%
mutate(variables = as.factor(variables)) %>%
group_by(variables) %>%
mutate(scaled_values = scale(values)) %>%
ungroup() %>%
ggplot(aes(x = variables, y = scaled_values)) +
geom_boxplot() +
theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
labs(y = "Z-standartized data", x = "")
typed_data %>%
select(where(is.numeric)) %>%
pivot_longer(cols = everything(), names_to = 'variables', values_to = 'values') %>%
mutate(variables = as.factor(variables)) %>%
group_by(variables) %>%
mutate(scaled_values = scale(values)) %>%
ungroup() %>%
ggplot(aes(x = variables, y = scaled_values, fill = variables)) +
geom_boxplot() +
theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
labs(y = "Z-standartized data", x = "")
typed_data %>%
select(where(is.numeric)) %>%
pivot_longer(cols = everything(), names_to = 'variables', values_to = 'values') %>%
mutate(variables = as.factor(variables)) %>%
group_by(variables) %>%
mutate(scaled_values = scale(values)) %>%
ungroup() %>%
ggplot(aes(x = variables, y = scaled_values, fill = variables)) +
geom_boxplot() +
theme(axis.text.x = blank) +
labs(y = "Z-standartized values", x = "")
typed_data %>%
select(where(is.numeric)) %>%
pivot_longer(cols = everything(), names_to = 'variables', values_to = 'values') %>%
mutate(variables = as.factor(variables)) %>%
group_by(variables) %>%
mutate(scaled_values = scale(values)) %>%
ungroup() %>%
ggplot(aes(x = variables, y = scaled_values, fill = variables)) +
geom_boxplot() +
theme(axis.text.x = element_blank()) +
labs(y = "Z-standartized values", x = "")
typed_data %>%
select(where(is.numeric)) %>%
pivot_longer(cols = everything(), names_to = 'variables', values_to = 'values') %>%
mutate(variables = as.factor(variables)) %>%
group_by(variables) %>%
mutate(scaled_values = scale(values)) %>%
ungroup() %>%
ggplot(aes(x = variables, y = scaled_values, fill = variables)) +
geom_boxplot() +
theme(axis.text.x = element_blank()) +
labs(y = "Z-standartized values", x = "") +
theme_alafoli()
typed_data %>%
select(where(is.numeric)) %>%
pivot_longer(cols = everything(), names_to = 'variables', values_to = 'values') %>%
mutate(variables = as.factor(variables)) %>%
group_by(variables) %>%
mutate(scaled_values = scale(values)) %>%
ungroup() %>%
ggplot(aes(x = variables, y = scaled_values, fill = variables)) +
geom_boxplot() +
theme(axis.text.x = element_blank()) +
labs(y = "Z-standartized values", x = "") +
theme_apa()
typed_data %>%
select(where(is.numeric)) %>%
pivot_longer(cols = everything(), names_to = 'variables', values_to = 'values') %>%
mutate(variables = as.factor(variables)) %>%
group_by(variables) %>%
mutate(scaled_values = scale(values)) %>%
ungroup() %>%
ggplot(aes(x = variables, y = scaled_values, fill = variables)) +
geom_boxplot() +
theme(axis.text.x = element_blank()) +
labs(y = "Z-standartized values", x = "") +
theme_dark()
typed_data %>%
select(where(is.numeric)) %>%
pivot_longer(cols = everything(), names_to = 'variables', values_to = 'values') %>%
mutate(variables = as.factor(variables)) %>%
group_by(variables) %>%
mutate(scaled_values = scale(values)) %>%
ungroup() %>%
ggplot(aes(x = variables, y = scaled_values, fill = variables)) +
geom_boxplot() +
theme(axis.text.x = element_blank()) +
labs(y = "Z-standartized values", x = "") +
theme_minimal()
typed_data %>%
select(where(is.numeric)) %>%
pivot_longer(cols = everything(), names_to = 'variables', values_to = 'values') %>%
mutate(variables = as.factor(variables)) %>%
group_by(variables) %>%
mutate(scaled_values = scale(values)) %>%
ungroup() %>%
ggplot(aes(x = variables, y = scaled_values, fill = variables)) +
geom_boxplot() +
theme_minimal()
theme(axis.text.x = element_blank()) +
labs(y = "Z-standartized values", x = "")
typed_data %>%
select(where(is.numeric)) %>%
pivot_longer(cols = everything(), names_to = 'variables', values_to = 'values') %>%
mutate(variables = as.factor(variables)) %>%
group_by(variables) %>%
mutate(scaled_values = scale(values)) %>%
ungroup() %>%
ggplot(aes(x = variables, y = scaled_values, fill = variables)) +
geom_boxplot() +
theme_bw()
theme(axis.text.x = element_blank()) +
labs(y = "Z-standartized values", x = "")
typed_data %>%
select(where(is.numeric)) %>%
pivot_longer(cols = everything(), names_to = 'variables', values_to = 'values') %>%
mutate(variables = as.factor(variables)) %>%
group_by(variables) %>%
mutate(scaled_values = scale(values)) %>%
ungroup() %>%
ggplot(aes(x = variables, y = scaled_values, fill = variables)) +
geom_boxplot() +
theme_bw(axis.text.x = element_blank()) +
labs(y = "Z-standartized values", x = "")
typed_data %>%
select(where(is.numeric)) %>%
pivot_longer(cols = everything(), names_to = 'variables', values_to = 'values') %>%
mutate(variables = as.factor(variables)) %>%
group_by(variables) %>%
mutate(scaled_values = scale(values)) %>%
ungroup() %>%
ggplot(aes(x = variables, y = scaled_values, fill = variables)) +
geom_boxplot() +
theme_bw() +
theme(axis.text.x = element_blank()) +
labs(y = "Z-standartized values", x = "")
